#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks..."

# Run tests for both client and server
echo "📝 Running tests..."
npm run test:pre-commit --prefix client
npm run test:pre-commit --prefix ../server

# Run linting
echo "🧹 Running linting..."
npm run lint --prefix client --if-present
npm run lint --prefix ../server --if-present

# Check for security vulnerabilities
echo "🔒 Checking security vulnerabilities..."
npm audit --audit-level=moderate --prefix client
npm audit --audit-level=moderate --prefix ../server

echo "✅ Pre-commit checks completed successfully!"